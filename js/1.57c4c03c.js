(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"7XBu":function(n,e,t){"use strict";t.d(e,"b",function(){return a}),t.d(e,"d",function(){return i}),t.d(e,"c",function(){return r}),t.d(e,"a",function(){return s});var a={ADMIN:"fas fa-cog",PARENT:"fas fa-user",TEACHER:"fas fa-book",STUDENT:"fas fa-graduation-cap"},i={ADMIN:"Administrator",PARENT:"Parent",TEACHER:"Teacher",STUDENT:"Student"},r=[{label:"Admin",value:"ADMIN"},{label:"Student",value:"STUDENT"},{label:"Parent",value:"PARENT"},{label:"Teacher",value:"TEACHER"}];function s(n){return-1!==n.state.app.roles.indexOf("ADMIN")}},A3SY:function(n,e,t){"use strict";t.d(e,"a",function(){return S}),t.d(e,"m",function(){return P}),t.d(e,"n",function(){return q}),t.d(e,"h",function(){return T}),t.d(e,"g",function(){return k}),t.d(e,"d",function(){return y}),t.d(e,"l",function(){return w}),t.d(e,"k",function(){return z}),t.d(e,"j",function(){return B}),t.d(e,"i",function(){return D}),t.d(e,"c",function(){return I}),t.d(e,"b",function(){return U}),t.d(e,"f",function(){return _}),t.d(e,"e",function(){return M});var a=t("VkAN"),i=t.n(a),r=t("lTCR"),s=t.n(r);function o(){var n=i()(["\n  mutation DisableUserMutation($id: ID!){\n    disableUser(where: {id: $id}) {\n      id\n      disabled\n    }\n  }\n"]);return o=function(){return n},n}function u(){var n=i()(["\n  mutation EnableUserMutation($id: ID!){\n    enableUser(where: {id: $id}) {\n      id\n      disabled\n    }\n  } \n"]);return u=function(){return n},n}function l(){var n=i()(["\n  mutation CreateUserAndAvatarMutation($name: String!, $email: String!, $timezone: String!, $avatarId: ID!, $isAdmin: Boolean, $isTeacher: Boolean, $isStudent: Boolean, $isParent: Boolean, $sub: String!, $username: String!) {\n    createUser(\n      data: {\n        name: $name\n        username: $username\n        email: $email\n        timezone: $timezone\n        isAdmin: $isAdmin\n        isTeacher: $isTeacher\n        isStudent: $isStudent\n        isParent: $isParent\n        sub: $sub\n        avatar: {\n          connect: { id: $avatarId }\n        }\n      }\n    ){\n      id\n      name\n      email\n      timezone\n      disabled\n      isAdmin\n      isTeacher\n      isStudent\n      isParent\n      avatar {\n        url\n      }\n    }\n  }\n"]);return l=function(){return n},n}function c(){var n=i()(["\n  mutation CreateUserMutation($name: String!, $email: String!, $timezone: String!, $isAdmin: Boolean, $isTeacher: Boolean, $isStudent: Boolean, $isParent: Boolean, $username: String!){\n    createUser(\n      data: {\n        name: $name\n        username: $username\n        email: $email\n        timezone: $timezone\n        isAdmin: $isAdmin\n        isTeacher: $isTeacher\n        isStudent: $isStudent\n        isParent: $isParent\n      }\n    ){\n      id\n      name\n      email\n      timezone\n      disabled\n      avatar {\n        url\n      }\n      isAdmin\n      isTeacher\n      isStudent\n      isParent\n      username\n    }\n  }\n"]);return c=function(){return n},n}function d(){var n=i()(["\n  mutation UpdateProfileMutation($name: String!, $timezone: String!, $avatarId: ID!, $isAdmin: Boolean, $isTeacher: Boolean, $isStudent: Boolean, $isParent: Boolean) {\n    updateProfile(\n      data: {\n        name: $name\n        timezone: $timezone\n        isAdmin: $isAdmin\n        isTeacher: $isTeacher\n        isStudent: $isStudent\n        isParent: $isParent\n        avatar: {\n          connect: { id: $avatarId }\n        }\n      }\n    ){\n      id\n      name\n      email\n      timezone\n      isAdmin\n      isTeacher\n      isStudent\n      isParent\n      disabled\n      avatar {\n        url\n      }\n    }\n  }\n"]);return d=function(){return n},n}function m(){var n=i()(["\n  mutation UpdateProfileMutation($name: String!, $timezone: String!, $isAdmin: Boolean, $isTeacher: Boolean, $isStudent: Boolean, $isParent: Boolean) {\n    updateProfile(\n      data: {\n        name: $name\n        timezone: $timezone\n        isAdmin: $isAdmin\n        isTeacher: $isTeacher\n        isStudent: $isStudent\n        isParent: $isParent\n      }\n    ){\n      id\n      name\n      email\n      timezone\n      isAdmin\n      isTeacher\n      isStudent\n      isParent\n      disabled\n      avatar {\n        url\n      }\n    }\n  }\n"]);return m=function(){return n},n}function h(){var n=i()(["\n  mutation updateUserMutation($name: String!, $timezone: String!, $id: ID!, $avatarId: ID!, $isAdmin: Boolean, $isTeacher: Boolean, $isStudent: Boolean, $isParent: Boolean) {\n    updateUser(\n      where: {id: $id}\n      data: {\n        name: $name\n        timezone: $timezone\n        isAdmin: $isAdmin\n        isTeacher: $isTeacher\n        isStudent: $isStudent\n        isParent: $isParent\n        avatar: {\n          connect: { id: $avatarId }\n        }\n      }\n    ){\n      id\n      name\n      email\n      timezone\n      isAdmin\n      isTeacher\n      isStudent\n      isParent\n      disabled\n      avatar {\n        url\n      }\n    }\n  }\n"]);return h=function(){return n},n}function $(){var n=i()(["\n  mutation updateUserMutation($name: String!, $timezone: String!, $id: ID!, $isAdmin: Boolean, $isTeacher: Boolean, $isStudent: Boolean, $isParent: Boolean) {\n    updateUser(\n      where: {id: $id}\n      data: {\n        name: $name\n        timezone: $timezone\n        isAdmin: $isAdmin\n        isTeacher: $isTeacher\n        isStudent: $isStudent\n        isParent: $isParent\n      }\n    ){\n      id\n      name\n      email\n      timezone\n      isAdmin\n      isTeacher\n      isStudent\n      isParent\n      disabled\n      avatar {\n        url\n      }\n    }\n  }\n"]);return $=function(){return n},n}function f(){var n=i()(["\n  mutation deleteUserMutation($id: ID!) {\n    deleteUser(where: {id: $id }) {\n      id\n    }\n  }\n"]);return f=function(){return n},n}function p(){var n=i()(["\n  query me {\n    me {\n      id\n      sub\n      name\n      email\n      timezone\n      disabled\n      avatar {\n        url\n      }\n      isAdmin\n      isTeacher\n      isStudent\n      isParent\n      username\n    }\n  }\n"]);return p=function(){return n},n}function v(){var n=i()(["\n  query ProfileQuery {\n    user: profile {\n      id\n      sub\n      name\n      email\n      timezone\n      disabled\n      avatar {\n        url\n      }\n      isAdmin\n      isTeacher\n      isParent\n      isStudent\n      username\n    }\n  }\n"]);return v=function(){return n},n}function b(){var n=i()(["\n  query userQuery($id: ID!) {\n    user( where: {id: $id} ) {\n      id\n      sub\n      name\n      email\n      timezone\n      disabled\n      avatar {\n        url\n      }\n      isAdmin\n      isTeacher\n      isParent\n      isStudent\n      username\n    }\n  }\n"]);return b=function(){return n},n}function g(){var n=i()(["\n  subscription UsersSubscription {\n    userSubscription {\n      mutation\n      node {\n        id\n        sub\n        name\n        email\n        avatar {\n          url\n        }\n        createdAt\n        updatedAt\n        isAdmin\n        isTeacher\n        isParent\n        isStudent\n        disabled\n      }\n      previousValues {\n        id\n      }\n    }\n  }\n"]);return g=function(){return n},n}function A(){var n=i()(["\n  query AllUsersQuery {\n    users(orderBy: name_ASC) {\n      id\n      name\n      email\n      avatar {\n        url\n      }\n      createdAt\n      updatedAt\n      isAdmin\n      isTeacher\n      isParent\n      isStudent\n      disabled\n      username\n    }\n  }\n"]);return A=function(){return n},n}var S=s()(A()),P=s()(g()),q=s()(b()),T=s()(v()),k=s()(p()),y=s()(f()),w=s()($()),z=s()(h()),B=s()(m()),D=s()(d()),I=s()(c()),U=s()(l()),_=s()(u()),M=s()(o())},"F/06":function(n,e,t){},PTxA:function(n,e,t){"use strict";var a=t("F/06"),i=t.n(a);i.a},ez0Y:function(n,e,t){"use strict";t.r(e);var a=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("q-layout",{attrs:{view:"lHh Lpr lFf"}},[t("q-layout-header",[t("q-toolbar",{attrs:{color:"primary"}},[this.$route.meta.backRoute?[t("q-btn",{staticClass:"text-right",attrs:{flat:"",round:"","aria-label":"Menu"},on:{click:function(e){n.$router.replace({name:n.$route.meta.backRoute})}}},[t("q-icon",{attrs:{name:"arrow_back"}})],1)]:[t("q-btn",{attrs:{flat:"",round:"","aria-label":"Menu"},on:{click:function(e){n.leftDrawerOpen=!n.leftDrawerOpen}}},[t("q-icon",{attrs:{name:"menu"}})],1)],t("q-toolbar-title",{staticClass:"text-center"},[n._v("\n        "+n._s(this.$route.meta.title)+"\n      ")]),t("q-btn",{attrs:{flat:"",dense:"",round:"","aria-label":"Persona"}},[n.me&&n.me.avatar?t("img",{staticClass:"avatar toolbar-avatar",attrs:{src:n.me.avatar.url}}):t("q-icon",{attrs:{name:"person",size:"30px"}}),t("q-popover",[t("q-list",{attrs:{link:""}},[n.roles&&n.roles.length>1?[t("q-list-header",[n._v("Personas")]),n._l(n.roles,function(e){return t("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],key:e,class:n.persona===e&&"router-link-active",nativeOn:{click:function(t){n.setPersona(e)}}},[t("q-item-side",{attrs:{icon:n.icons[e]}}),t("q-item-main",{attrs:{label:n.titles[e]}}),t("q-item-side",{attrs:{right:"",icon:"keyboard_arrow_right"}})],1)}),t("q-item-separator"),t("q-list-header",[n._v("Application")])]:n._e(),t("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{to:{name:"myAccount"},replace:""}},[t("q-item-side",{attrs:{icon:"fas fa-user-circle"}}),t("q-item-main",{attrs:{label:"My Account"}}),t("q-item-side",{attrs:{right:"",icon:"keyboard_arrow_right"}})],1),t("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],nativeOn:{click:function(e){return n.signout(e)}}},[t("q-item-side",{attrs:{icon:"fas fa-sign-out-alt"}}),t("q-item-main",{attrs:{label:"Sign Out"}}),t("q-item-side",{attrs:{right:"",icon:"keyboard_arrow_right"}})],1)],2)],1)],1)],2)],1),t("q-layout-drawer",{attrs:{"content-class":"mat"===n.$q.theme?"bg-grey-2":null},model:{value:n.leftDrawerOpen,callback:function(e){n.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[t("q-list",{attrs:{"no-border":"",separator:"",link:"","inset-delimiter":""}},[t("q-list-header",[n._v(n._s(n.titles[n.persona])+" Actions")]),n._l(n.filteredLinks,function(e){return[e.group?t("q-collapsible",{key:e.name,attrs:{opened:n.currentGroup===e.group}},[t("template",{slot:"header"},[t("q-item-side",{attrs:{icon:e.icon}}),t("q-item-main",{attrs:{label:e.title,sublabel:e.description}})],1),n._l(e.children,function(n){return t("q-item",{key:n.name,attrs:{to:n.path}},[t("q-item-side",{attrs:{icon:n.meta.icon}}),t("q-item-main",{attrs:{label:n.meta.title,sublabel:n.meta.description}})],1)})],2):t("q-item",{key:e.name,attrs:{to:e.path}},[t("q-item-side",{attrs:{icon:e.icon}}),t("q-item-main",{attrs:{label:e.title,sublabel:e.description}})],1)]})],2)],1),t("q-page-container",[t("transition",{attrs:{appear:"","enter-active-class":n.enterAnimation,"leave-active-class":n.leaveAnimation}},[t("router-view",{key:n.$route.fullPath})],1)],1)],1)},i=[];a._withStripped=!0;t("KKXr"),t("yt8O"),t("hhXQ"),t("rGqo"),t("f3/d");var r=t("MVZn"),s=t.n(r),o=(t("pIFo"),t("ls82"),t("yXPU")),u=t.n(o),l=t("K405"),c=t("L2JU"),d=t("7XBu"),m=t("Ur+5"),h=t("uZRx"),$=t("A3SY"),f={name:"LayoutDefault",data:function(){return{me:{},leftDrawerOpen:this.$q.platform.is.desktop,icons:d["b"],titles:d["d"],links:m["a"].get(),enterAnimation:"page-transition animated slideInRight",leaveAnimation:"page-transition animated slideOutLeft"}},created:function(){var n=u()(regeneratorRuntime.mark(function n(){var e;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,h["Auth"].currentSession();case 2:if(e=n.sent.getIdToken().payload["cognito:groups"],this.$store.commit("app/setRoles",e),e&&0!==!e.length){n.next=7;break}return this.$router.replace("/no_personas"),n.abrupt("return");case 7:if(!this.$route.meta||!this.$route.meta.persona||-1!==e.indexOf(this.$route.meta.persona)){n.next=10;break}return this.$router.replace("/404"),n.abrupt("return");case 10:this.persona||this.$store.dispatch("app/setPersona",this.roles[0]),"/"===this.$route.path&&this.links[this.persona]&&this.$router.replace(this.links[this.persona][0].path);case 12:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),computed:s()({currentGroup:function(){if(this.$route.matched[0]&&this.$route.matched[0].meta&&this.$route.matched[0].meta.group)return this.$route.matched[0].meta.group},filteredLinks:function(){return this.persona&&this.roles&&this.roles.length?this.links[this.persona]:[]},dateTime:function(){return l["Ha"].formatDate(this.now,"dddd, MMMM D, YYYY")}},Object(c["b"])("app",["roles","persona"])),watch:{$route:function(n,e){var t=e.meta.backRoute&&!n.meta.backRoute;this.enterAnimation=t?"page-transition animated slideInLeft":"page-transition animated slideInRight",this.leaveAnimation=t?"page-transition leaving animated slideOutRight":"page-transition leaving animated slideOutLeft"}},methods:{signout:function(){var n=this;this.$q.actionSheet({title:"Signed in a ".concat(this.me.name),actions:[{label:"Sign Out",color:"primary",icon:"fas fa-sign-out-alt",handler:function(){h["Auth"].signOut().then(function(){n.$store.dispatch("app/setPersona",""),n.$store.commit("app/setRoles",[]),Object.values(n.$apollo.provider.clients).forEach(function(n){return n.cache.reset()}),n.$router.push("/auth/signIn")}).catch(function(e){return n.$q.notify({message:e,type:"negative"})})}}]}).then(function(n){}).catch(function(){})},setPersona:function(n){this.persona!==n&&(this.$store.dispatch("app/setPersona",n),this.links[n]&&this.$router.replace(this.links[n][0].path))},goBack:function(){console.log(this.$route.path),this.$router.replace("/"+this.$route.path.split("/")[1])}},apollo:{me:{query:$["g"],fetchPolicy:"cache-and-network"}}},p=f,v=(t("PTxA"),t("KHd+")),b=Object(v["a"])(p,a,i,!1,null,null,null);e["default"]=b.exports}}]);